<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruleta de Palabras</title>
    <!-- Carga de Tailwind CSS para un dise帽o moderno y responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuraci贸n del tema de Tailwind y la fuente Inter -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5', // Indigo-600
                        'secondary': '#f97316', // Orange-500
                        'accent': '#10b981', // Emerald-500
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- Enlace a la fuente Inter de Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* Estilos CSS personalizados para la ruleta */
        .roulette-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }

        .roulette-wheel {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            transition: transform 5s cubic-bezier(0.2, 0.8, 0.2, 1); /* Curva de desaceleraci贸n suave */
            box-shadow: 0 0 0 8px #fff, 0 10px 20px rgba(0, 0, 0, 0.3);
            background-color: #fff;
        }

        .segment {
            position: absolute;
            width: 50%;
            height: 50%;
            top: 0;
            left: 50%;
            transform-origin: 0% 100%;
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            border: 1px solid rgba(255, 255, 255, 0.5); /* Separador suave entre segmentos */
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            padding-top: 10px;
            overflow: hidden;
        }

        .segment-content {
            position: absolute;
            top: 20%;
            right: 0%;
            transform: rotate(45deg); /* Ajuste para el texto dentro de la cu帽a */
            width: 100%;
            text-align: center;
        }

        /* Marcador de parada (puntero) */
        .pointer {
            position: absolute;
            top: -10px; /* Colocar justo encima de la ruleta */
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #ef4444; /* Rojo vibrante */
            z-index: 10;
        }

        /* Rotaci贸n y colores de los 8 segmentos */
        .s1 { background-color: #f87171; transform: rotate(0deg) skewY(45deg); }
        .s2 { background-color: #fb923c; transform: rotate(45deg) skewY(45deg); }
        .s3 { background-color: #facc15; transform: rotate(90deg) skewY(45deg); }
        .s4 { background-color: #a3e635; transform: rotate(135deg) skewY(45deg); }
        .s5 { background-color: #34d399; transform: rotate(180deg) skewY(45deg); }
        .s6 { background-color: #38bdf8; transform: rotate(225deg) skewY(45deg); }
        .s7 { background-color: #818cf8; transform: rotate(270deg) skewY(45deg); } /* Color para Figuras Geom茅tricas */
        .s8 { background-color: #c084fc; transform: rotate(315deg) skewY(45deg); }

        /* Ajuste para que el texto dentro de cada cu帽a parezca recto */
        .s1 .segment-content { transform: rotate(-45deg); }
        .s2 .segment-content { transform: rotate(0deg); }
        .s3 .segment-content { transform: rotate(45deg); }
        .s4 .segment-content { transform: rotate(90deg); }
        .s5 .segment-content { transform: rotate(135deg); }
        .s6 .segment-content { transform: rotate(180deg); }
        .s7 .segment-content { transform: rotate(225deg); }
        .s8 .segment-content { transform: rotate(270deg); }

    </style>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center font-sans p-4">

    <div class="w-full max-w-lg bg-white rounded-xl shadow-2xl p-6 md:p-8 text-center border-t-8 border-primary">
        <h1 class="text-3xl md:text-4xl font-black text-primary mb-2">
            <span class="text-secondary"></span> Ruleta de Palabras
        </h1>
        <p class="text-gray-600 mb-6">Gira la ruleta y practica tu vocabulario y articulaci贸n.</p>

        <!-- Contenedor de la Ruleta -->
        <div class="roulette-container mb-8">
            <div class="pointer"></div>
            <div id="rouletteWheel" class="roulette-wheel">
                <!-- Segmentos de la Ruleta (8 categor铆as) -->
                <div class="segment s1" style="z-index: 8;"><span class="segment-content text-lg">Animales</span></div>
                <div class="segment s2" style="z-index: 7;"><span class="segment-content text-lg">Frutas</span></div>
                <div class="segment s3" style="z-index: 6;"><span class="segment-content text-lg">Deportes</span></div>
                <div class="segment s4" style="z-index: 5;"><span class="segment-content text-lg">Instrumentos Musicales</span></div>
                <div class="segment s5" style="z-index: 4;"><span class="segment-content text-lg">Sentimientos</span></div>
                <div class="segment s6" style="z-index: 3;"><span class="segment-content text-lg">Profesiones</span></div>
                <div class="segment s7" style="z-index: 2;"><span class="segment-content text-lg">Figuras Geom茅tricas</span></div> <!-- 隆NUEVA CATEGORA! -->
                <div class="segment s8" style="z-index: 1;"><span class="segment-content text-lg">Ropa</span></div>
            </div>
        </div>

        <!-- rea de Resultado y Bot贸n -->
        <div id="resultArea" class="p-4 bg-primary/10 text-primary rounded-lg mb-6 shadow-inner min-h-[60px] flex items-center justify-center">
            <p id="resultText" class="text-xl font-semibold">Presiona "Girar" para comenzar a jugar.</p>
        </div>

        <button id="spinButton"
            onclick="spinWheel()"
            class="w-full py-3 px-4 bg-secondary hover:bg-secondary/90 text-white font-extrabold text-2xl rounded-full shadow-lg transition duration-150 ease-in-out transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
            aria-label="Girar la ruleta de palabras">
            GIRAR
        </button>

    </div>

    <script>
        // Definici贸n de las categor铆as del juego (ACTUALIZADAS con Figuras Geom茅tricas)
        const categories = [
            'Animales',
            'Frutas',
            'Deportes',
            'Instrumentos Musicales',
            'Sentimientos',
            'Profesiones',
            'Figuras Geom茅tricas', // 隆NUEVA CATEGORA!
            'Ropa'
        ];

        // Elementos del DOM
        const wheel = document.getElementById('rouletteWheel');
        const button = document.getElementById('spinButton');
        const resultText = document.getElementById('resultText');

        // ngulo de cada segmento (360 grados / 8 categor铆as = 45 grados por segmento)
        const segmentAngle = 360 / categories.length;
        let isSpinning = false;
        let totalRotation = 0;

        /**
         * Funci贸n para iniciar el giro de la ruleta.
         */
        function spinWheel() {
            if (isSpinning) return;
            isSpinning = true;
            button.disabled = true;
            button.textContent = '隆Girando...!';
            resultText.textContent = '隆La ruleta est谩 girando! Espera la categor铆a...';

            // 1. Elegir un 铆ndice de categor铆a aleatorio (0 a 7)
            const winningIndex = Math.floor(Math.random() * categories.length);
            const winningCategory = categories[winningIndex];

            // 2. Calcular la rotaci贸n para aterrizar en el centro del segmento
            // Se usa un offset (22.5 grados, que es la mitad del 谩ngulo del segmento) para centrar.
            const offset = 22.5;
            let angleToLand = 360 - (winningIndex * segmentAngle) - offset;


            // 3. Generar una rotaci贸n grande para simular el giro (varias vueltas)
            // Agregamos 5 a 10 vueltas completas (1800 a 3600 grados)
            const extraTurns = Math.floor(Math.random() * 6) + 5; // 5 a 10 vueltas
            const spinRotation = (extraTurns * 360) + angleToLand;

            // 4. Sumar la rotaci贸n al total acumulado
            totalRotation += spinRotation;

            // 5. Aplicar la rotaci贸n y manejar el evento de finalizaci贸n
            wheel.style.transition = 'transform 5s cubic-bezier(0.2, 0.8, 0.2, 1)';
            wheel.style.transform = `rotate(${totalRotation}deg)`;

            // Esperar a que la animaci贸n termine (5 segundos)
            setTimeout(() => {
                isSpinning = false;
                button.disabled = false;
                button.textContent = 'GIRAR DE NUEVO';

                // Mostrar el resultado final
                resultText.innerHTML = `隆Toca decir una palabra de la categor铆a: <span class="font-black text-secondary">${winningCategory}</span>! Articula con cuidado.`;

                // Peque帽o truco para asegurar que la pr贸xima rotaci贸n se vea bien
                // Reseteamos el transition-property para el pr贸ximo giro.
                wheel.style.transition = 'none';
                // Calculamos el 谩ngulo restante para mantener la posici贸n visual (totalRotation % 360)
                const normalizedAngle = totalRotation % 360;
                wheel.style.transform = `rotate(${normalizedAngle}deg)`;
                // Preparamos para el siguiente giro restableciendo la transici贸n
                setTimeout(() => {
                    wheel.style.transition = 'transform 5s cubic-bezier(0.2, 0.8, 0.2, 1)';
                    totalRotation = normalizedAngle; // Actualizamos el total para que sea solo el 谩ngulo visible
                }, 50);

            }, 5000); // 5000ms = 5 segundos de duraci贸n de la animaci贸n
        }

        // Llamar a spinWheel() al cargar para establecer la transici贸n inicial (aunque no girar谩)
        window.onload = () => {
             wheel.style.transform = `rotate(0deg)`;
             wheel.style.transition = 'transform 5s cubic-bezier(0.2, 0.8, 0.2, 1)';
        }

    </script>
</body>
</html>